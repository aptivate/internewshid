{% extends "base_side.html" %}
{% load i18n %}
{% load bootstrap3 %}
{% load render_table from django_tables2 %}

{% block maincontent %}
<h1 class="page-header"><span class="fa fa-pencil fa-fw"></span>{% trans "View &amp; Edit" %}</h1>
 <div class='row'>
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading clearfix">
                <span class="fa fa-table fa-fw"></span>{{ type_label }}
                <div class="pull-right">
                    <form action="{% url "sources-upload" %}"
                          method="post"
                          enctype="multipart/form-data"
                          class="auto-upload-file">
                        {% csrf_token %}
                            {% bootstrap_form upload_form show_label=False %}
                            <a class="btn item-source-upload btn-block btn-primary upload-button" type="button" value="Upload" href="{% url "data-view" %}"><span class="fa fa-upload fa-fw"></span>{% blocktrans %}Upload {{ type_label }}{% endblocktrans %}</a>
                    </form>
                </div>
            </div>
            <div class="panel-body">
                <form action="{% url "data-view-process" %}"
                      method="post"
                      class="view-items-form">
                    {% csrf_token %}
                    <div class="form-group form-header-group">
                        <select name='action' class='form-control' required>
                            <option value="" default selected">{% trans "Actions" %}</option>
                            {% for group in actions %}
                                <optgroup label="{{ group.label }}">
                                    {% for action, action_label in group.items.items %}
                                        <option value="{{ action }}">
                                            {{ action_label }}
                                        </option>
                                    {% endfor %}
                                </optgroup>
                            {% endfor %}
                        </select>
                        {% bootstrap_button "Update" button_type="submit" value="Update" button_class="btn btn-success btn-sm table-submit" %}
                    </div>
                    {% with pagination_class="pagination-circle-nav" %}
                        {% render_table table %}
                    {% endwith %}
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock maincontent %}

